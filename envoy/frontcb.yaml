admin:
    access_log_path: /dev/null
    address:
      socket_address:
        address: 0.0.0.0
        port_value: 6969
  
  static_resources:
    clusters:
      - name: onos1
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        circuit_breakers:
          thresholds:
            max_connections: 1
            max_pending_requests: 1
            max_requests: 1
        load_assignment:
          cluster_name: onos1
          endpoints:
            - lb_endpoints:
                - endpoint:
                    address:
                      socket_address:
                        address: onos1
                        port_value: 6653
      - name: onos2
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        circuit_breakers:
          thresholds:
            max_connections: 1
            max_pending_requests: 1
            max_requests: 1
        load_assignment:
          cluster_name: onos2
          endpoints:
            - lb_endpoints:
                - endpoint:
                    address:
                      socket_address:
                        address: onos2
                        port_value: 6653
      - name: onos3
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        circuit_breakers:
          thresholds:
            max_connections: 1
            max_pending_requests: 1
            max_requests: 1
        load_assignment:
          cluster_name: onos3
          endpoints:
            - lb_endpoints:
                - endpoint:
                    address:
                      socket_address:
                        address: onos3
                        port_value: 6653

  
    listeners:
      - name: listener_0
        address:
          socket_address:
            address: 0.0.0.0
            port_value: 6653
        filter_chains:
          - filters:
              - name: envoy.filters.network.http_connection_manager
                typed_config:
                  "@type": type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager
                  stat_prefix: ingress_http
                  cluster: envoyonos1
                  route_config:
                    name: local_route
                    virtual_hosts:
                    - name: backend
                      domains:
                      - "*"
                      routes:
                        route:
                          weighted_clusters:
                            clusters:
                            - name: onos1
                              weight: 0
                            - name: onos2
                              weight: 0
                            - name: onos3
                              weight: 100